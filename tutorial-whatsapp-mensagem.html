<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tutorial WhatsApp</title>
    <link rel="stylesheet" href="styles/style.css">
    <link rel="stylesheet" href="styles/style-whatsapp.css">

    <style>
        body {
            background-color: #075E54;
        }
    </style>
</head>
<body>

    <div class="app-container">
        <div class="tutorial-screen whatsapp-bg">
            
            <div class="chat-list-screen" id="chat-list-screen">
                 <header class="tutorial-header">
                    <a href="menu-whatsapp.html">‚Üê</a>
                    <h4>Conversas</h4>
                </header>
                <div class="whatsapp-chat-list">
                    <div class="chat-item" id="target-contato">
                        <img src="images/perfil.png" alt="Foto">
                        <div class="chat-info">
                            <h4>Maria (filha)</h4>
                            <p>Clique aqui para come√ßar!</p>
                        </div>
                    </div>
                    <div class="chat-item">
                        <img src="images/perfil.png" alt="Foto">
                        <div class="chat-info">
                            <h4>Grupo da fam√≠lia</h4>
                            <p>Fulano: Foto</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="chat-screen" id="chat-screen">
                 <header class="tutorial-header" style="background-color: #075E54;">
                    <a href="#" id="back-button" style="font-size: 1.5em;">‚Üê</a>
                    <img src="images/perfil.png" alt="Foto" style="width:40px; height:40px; border-radius: 50%; margin-right: 10px;">
                    <h4 style="margin:0;">Maria (filha)</h4>
                </header>
                <div class="chat-history" id="chat-history"></div>
                <div class="chat-input-bar">
                    <input type="text" class="chat-input" id="target-input" placeholder="Digite uma mensagem">
                    <button class="send-button hidden" id="target-send">‚û§</button>
                </div>
            </div>

            <div class="help-popup" id="popup-1" style="top: 250px; display: block;">
                <span class="popup-close">X</span>
                <p>Bem-vindo ao treino! üëã</p>
                <p>Para enviar uma mensagem, primeiro, clique no <b>contato</b> que voc√™ quer conversar. Vamos tentar com a <b>"Maria (filha)"</b>.</p>
            </div>

            <div class="help-popup" id="popup-2" style="top: 70%;">
                <span class="popup-close">X</span>
                <p>√ìtimo! Esta √© a tela de conversa.</p>
                <p>Agora, clique na <b>caixa de texto</b> (onde diz "Digite uma mensagem") para o teclado do seu celular aparecer.</p>
            </div>

            <div class="help-popup" id="popup-3" style="top: 70%;">
                <span class="popup-close">X</span>
                <p>Excelente!</p>
                <p>O teclado real apareceu. <b>Digite uma mensagem</b> (como "Ol√°!") e clique no <b>bot√£o verde</b> (‚û§) para enviar.</p>
            </div>

            <div class="help-popup" id="popup-4" style="top: 70%;">
                <span class="popup-close">X</span>
                <p>Parab√©ns! ü•≥</p>
                <p>Voc√™ enviou sua primeira mensagem. Veja como ela aparece na tela.</p>
                <p>Vamos esperar a Maria responder...</p>
                <button onclick="proximaEtapa(null)">Ok!</button>
            </div>


            <div class="help-popup" id="popup-5" style="top: 30%;">
                <span class="popup-close">X</span>
                <p>Tutorial conclu√≠do! ‚úÖ</p>
                <p>Veja! A Maria respondeu. Voc√™ aprendeu a enviar e receber mensagens. Continue praticando!</p>
                <button onclick="window.location.href='menu-whatsapp.html'">Voltar ao Menu</button>
            </div>

        </div>
    </div>

    <script>
        // --- Pegando todos os elementos ---
        const chatListScreen = document.getElementById('chat-list-screen');
        const chatScreen = document.getElementById('chat-screen');
        const chatHistory = document.getElementById('chat-history');
        const targetContato = document.getElementById('target-contato');
        const targetInput = document.getElementById('target-input');
        const targetSend = document.getElementById('target-send');
        const backButton = document.getElementById('back-button');

        // --- Fun√ß√£o Helper: Controla os Popups ---
        function proximaEtapa(idDoProximoPopup) {
            document.querySelectorAll('.help-popup').forEach(popup => {
                popup.style.display = 'none';
            });
            if (idDoProximoPopup) {
                document.getElementById(idDoProximoPopup).style.display = 'block';
            }
        }

        // --- Fun√ß√£o Helper: Cria Bolhas de Chat ---
        function criarBolhaDeChat(texto, tipo) {
            const bolha = document.createElement('div');
            bolha.classList.add('chat-bubble', tipo === 'sent' ? 'bubble-sent' : 'bubble-received');
            bolha.textContent = texto; // Usando textContent por seguran√ßa
            chatHistory.appendChild(bolha);
            chatHistory.scrollTop = chatHistory.scrollHeight;
        }

        // --- L√ìGICA DO TUTORIAL ---

        // ETAPA 1: Clicar no Contato
        targetContato.addEventListener('click', function() {
            chatListScreen.style.transform = 'translateX(-100%)';
            chatScreen.style.transform = 'translateX(0)';
            proximaEtapa('popup-2');
        });

        // ETAPA 2: Clicar na Caixa de Texto
        targetInput.addEventListener('click', function() {
            targetSend.classList.remove('hidden');
            proximaEtapa('popup-3');
        });

        // ETAPA 3: Clicar em Enviar
        targetSend.addEventListener('click', function() {
            const texto = targetInput.value;
            if (texto.trim() !== '') {
                criarBolhaDeChat(texto, 'sent');
                targetInput.value = '';
                targetSend.classList.add('hidden');
                targetInput.blur(); // Esconde o teclado
                proximaEtapa('popup-4');
                
                // Simula a resposta
                setTimeout(function() {
                    const respostaMsg = `Oi! Tudo bem?`;
                    criarBolhaDeChat(respostaMsg, 'received');
                    setTimeout(function() {
                        proximaEtapa('popup-5');
                    }, 2000); 
                }, 2000); 
            }
        });

        // --- Bot√µes Extras ---
        backButton.addEventListener('click', function(e) {
            e.preventDefault(); // Impede o link '#' de pular a tela
            chatListScreen.style.transform = 'translateX(0)';
            chatScreen.style.transform = 'translateX(100%)';
            chatHistory.innerHTML = '';
            targetInput.value = '';
            proximaEtapa('popup-1');
        });

        // Inicia o tutorial (mostra o primeiro popup)
        document.addEventListener('DOMContentLoaded', function() {
            proximaEtapa('popup-1');

            // Adiciona a funcionalidade de fechar em todos os bot√µes 'X'
            document.querySelectorAll('.popup-close').forEach(button => {
                button.addEventListener('click', function() {
                    this.parentElement.style.display = 'none';
                });
            });
        });
    </script>

</body>
</html>